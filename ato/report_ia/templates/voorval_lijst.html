{% extends "base.html" %}
{% load bootstrap3 %}
{% block content %}
<style type="text/css">
    .ingave-lijst{
    	margin: 20px;
    }
</style>

<div class="ingave-lijst">
<h4><span class="label label-default"> {{user.username}} </span></h4>
<h4><span class="label label-default"> {{club}} </span></h4>
</div>
<div class="page-menu">
<ul class="breadcrumb">
	<li><a href="{% url 'report_ia:voorval_create' %}">Nieuw voorval</a></li>
	<li><a href="{% url 'logout' %}">Afmelden</a></li>
{% if ausr.is_super %}
	<li><a href="{% url 'report_ia:maatregel_lijst'  %}">Maatregelen</a></li>
	<li><a href="{% url 'report_ia:voorval_overzicht' %}">Totalen</a></li>
	<li><a href="{% url 'report_ia:voorval_export' %}">Exporteren</a></li>
	<li><a href="{% url 'admin:index' %}">Administrator</a></li>
{% endif %}
</ul>
</div>
      
{% if object_list %}
    <div class="ingave-lijst">
{% if ausr.is_super %}
 <h3>should show all clubs here (only superuser)</h3>
{% endif %}
	<table class="table table-bordered">
        <thead>
            <tr>
	        <th>Club</th>
                <th>Datum voorval</th>
                <th>Type voorval</th>
	        <th>Type toestel</th>
                <th>Opleiding</th>
                <th>Synopsis</th>
	        <th colspan="2">Acties Voorval</th>
	        <th colspan="2">Acties Maatregel</th>
            </tr>
        </thead>
        <tbody>
	  {% for voorval in object_list %}
	  {% if voorval.is_recent %}
	    <tr class="warning">
	  {% else %}
	     {% if voorval.has_maatregel  %}
	      <tr class="info">
	     {% else %}
              <tr class="danger">
	     {% endif %}
	  {% endif %}
	    <td>{{ voorval.club.naam_kort }}</td>
	    <td>{{ voorval.datum|date:"SHORT_DATE_FORMAT" }}</td>
	    <td>{{ voorval.type_voorval }}</td>
	    <td>{{ voorval.type_toestel }}</td>
	    <td>{{ voorval.opleiding }}</td>
	    <td>{{ voorval.synopsis|truncatewords:20 }}</td>
	    <td><a href="{% url 'report_ia:voorval_update' voorval.id %}" class="btn btn-success btn-sm"><span class="glyphicon glyphicon-pencil"></span></a></td>
            {% if voorval.aantal_maatregelen %}
	    <td><a href="{% url 'report_ia:voorval_delete' voorval.id %}" class="btn btn-danger btn-sm disabled"><span class="glyphicon glyphicon-trash"></span></a></td>
            {% else %}
	    <td><a href="{% url 'report_ia:voorval_delete' voorval.id %}" class="btn btn-danger btn-sm"><span class="glyphicon glyphicon-trash"></span></a></td>
            {% endif %}
{% if ausr.is_admin or ausr.is_super%}
	<td><a href="{% url 'report_ia:maatregel_create' voorval.id %}" class="btn btn-success btn-sm"><span class="glyphicon glyphicon-plus-sign"></span></a></td>
	<td><a href="{% url 'report_ia:maatregel_lijst' voorval.id %}" class="btn btn-success btn-sm"><span class="badge">{{ voorval.aantal_maatregelen }}</span></a></td>
{% endif %}
	   </tr>
           {% endfor %}
	  </tbody>
         </table>
	</div>
{% else %}
    <p>Er zijn nog geen voorvallen geregistreerd.</p>
{% endif %}

{% endblock %}